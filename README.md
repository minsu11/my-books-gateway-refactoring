# MyBooks Gateway refactoring

- 도서 쇼핑몰 리팩토링 중
- 기존 프로젝트(https://github.com/My-Books-projects/gateway)


## 진행 상황 및 해야할 일
- [ ] 자바 버전 21 변경 및 spring boot 버전 변경
- [ ] 환경에 맞게 코드 수정
- [ ] api spec 재정의, 기존 api 따라가지만, restful 하게 변경해볼 예정

## 기존 게이트웨이

- 인가 처리 시 게이트웨이에서 토큰 검증을 진행함
- 요청 들어온 url에 따라서 인가처리를 할 때도 있고, 안하는 url도 있음

## 의문

- 굳이 게이트웨이에서 검증을 해야할까? 라는 의문
  - 프론트에서 게이트웨이로 요청을 보내기 전 해당 토큰이 유효한지 보면 되는 건데 굳이 까야할까 라는 의문
- 여기서 걸리는 점
  - 프론트에서 토큰을 깐다고 했을 때, 토큰 안에 있는 user id(user 식별 할 수 있는 키)를 결국 api server 가서 해당 user id가 있는 지 검증을 해야하는 건데, 그러면 결국 백엔드에서도 인가 처리를 해줘야하는 거 아닌가?
  - 그러면 redis에 저장을 하니깐 프론트에서 레디스에 있는 데이터를 끌고 와서 데이터 검증을 할까

